---
title: "【MEMS】ROMで作る mems-ana_core の数式構造と設計ポリシー"
emoji: "🧠"
type: "tech"
topics: ["MEMS", "ROM", "モデリング", "数式", "Python"]
published: true
---

## はじめに

前回の記事（402）では、  
**圧電ヒステリシス入力に対する MEMS 構造の挙動** を  
可視化デモとして眺めました。

本記事では、その裏側にある  
**mems-ana_core の数式構造と設計ポリシー** を整理します。

本稿の目的は、

- 実装コードの逐語解説  
- 厳密な物理再現  

ではなく、

> なぜこの数式構造にしているのか  
> どこまでをモデルに含め、どこを切っているのか  

を **設計者の視点で明確化すること** です。

※ 本記事は mems-ana シリーズ第3回です。

---

## mems-ana_core の立ち位置

**mems-ana_core** は、

- mems-ana の中核計算部  
- ROM（Reduced Order Model）の実装体  

に相当します。

特徴は次の3点です。

1. **支配モードを明示的に仮定**
2. **物理量と数式の対応が追える**
3. **校正パラメータの意味が限定的**

「速く回す」ことよりも、  
**構造が読めること** を優先しています。

---

## モデル化の前提

対象としているのは、典型的な

- 薄膜 MEMS 構造
- 矩形ダイアフラム
- 小変形・準静的応答

です。

したがって、

- 幾何学的非線形  
- 大変形  
- 局所塑性  

は **モデル外** とします。

この前提を崩す場合、  
mems-ana_core を使うべきではありません。

---

## ROM（Reduced Order Model）の基本形

変位場 $u(x,y,t)$ は、  
空間モード $\phi_n(x,y)$ と  
時間係数 $q_n(t)$ の積で表します。

$$
u(x,y,t) = \sum_{n=1}^{N} q_n(t)\,\phi_n(x,y)
$$

ここで重要なのは、

- $N$ を **意図的に小さくする**
- 物理的に意味のあるモードのみを選ぶ  

という点です。

mems-ana_core では、

- 対称性
- 支配モード
- 境界条件

を考慮し、  
**最小限のモード数** で構成します。

---

## 運動方程式の構造

ROM による一般形は、次の形になります。

$$
M \ddot{\mathbf{q}} + C \dot{\mathbf{q}} + K \mathbf{q}
= \mathbf{f}(t)
$$

ここで、

- $\mathbf{q}$：モード係数ベクトル  
- $M$：質量行列  
- $C$：減衰行列  
- $K$：剛性行列  

です。

mems-ana_core では、

- 動的解析よりも  
- **準静的・低周波応答**

を主に想定しているため、  
$\ddot{\mathbf{q}}$ や $\dot{\mathbf{q}}$ を  
省略・簡略化するケースもあります。

---

## 圧電駆動項の扱い

圧電駆動は、  
**外力項 $\mathbf{f}(t)$** として導入します。

重要なのは、

- 圧電定数 $d_{33}$ を  
  **「実効的な比例係数」として扱う**
- 電界分布の厳密解を追わない  

という割り切りです。

その結果、

- 電圧 → 分極 → 等価外力  
という **設計用の因果関係** を  
シンプルに保っています。

---

## ヒステリシス入力の位置付け

402 で用いた **P–Ez ヒステリシス** は、

- 材料モデルの厳密再現  
ではなく、
- **入力波形の非線形性の代表**

として導入しています。

つまり mems-ana_core は、

- ヒステリシスを「内部状態」として解く  
のではなく、
- **外から与えられる履歴依存入力**

として扱います。

この割り切りにより、

- 数式構造の複雑化を防ぎ  
- ROM の透明性を維持  

しています。

---

## 校正（キャリブレーション）の考え方

mems-ana_core における校正は、

- FEM 結果
- 実測データ

の **どちらにも対応可能** ですが、  
目的は一貫しています。

> パラメータに「意味」を持たせたまま  
> 数値を合わせる

具体的には、

- 剛性スケール  
- 有効圧電係数  
- 減衰係数  

などを **限定的に調整** します。

「何でも合わせる」ことはしません。

---

## FEM との関係（再確認）

mems-ana_core は FEM の代替ではありません。

- FEM：  
  - 局所応力  
  - 複雑形状  
  - 高次モード  

- mems-ana_core：  
  - 全体挙動  
  - 感度  
  - 設計思考

という **役割分担** を前提にしています。

FEM 結果を  
**「なぜそうなったか考えるための補助線」**  
として使う位置付けです。

---

## GitHub リポジトリ

本記事で解説した **mems-ana_core** を含む  
実装コードは、以下の GitHub リポジトリで公開しています。

https://github.com/Samizo-AITL/mems-ana

数式とコードの対応関係は、  
リポジトリ内のスクリプトを参照してください。

---

## シリーズまとめ

- **401**：設計思想と全体像  
- **402**：可視化デモ（挙動を眺める）  
- **403**：ROM 数式構造と設計ポリシー（本記事）

この3本で、

- 考え方  
- 挙動  
- 数理  

を **一貫した流れ** として提示しました。

---

## おわりに

mems-ana_core は、

> 精密解を出すためのモデル  
ではなく、  
> 設計者が考えるためのモデル  

として設計しています。

数式を減らすことよりも、  
**意味を減らさないこと** を優先しました。

ROM は「近似」ですが、  
**良い近似は思考を加速します**。

本記事が、  
MEMS 設計におけるモデル化の考え方を  
整理する一助になれば幸いです。

