---
title: "【AITL】Envelope Control ― 制御対象の使用範囲を状態として扱う設計思想"
emoji: "📦"
type: "tech"
topics: ["control", "robust-control", "fsm", "safety", "cyber-physical-systems"]
published: true
---

# Envelope Control  
## ― 制御対象の「使用範囲」を状態として扱う設計思想

制御系の議論では、性能・安定性・最適化が中心に語られます。  
しかし実システムでは、それより先に壊れるものがあります。

- センサが信用できなくなる  
- アクチュエータが飽和する  
- 電圧が落ち、電流制限にかかる  

本記事では、そうした現実を正面から扱う  
**Envelope Control（エンベロープ制御）** という設計思想を紹介します。

---

## Envelope（使用範囲）とは何か

Envelope とは、制御対象が **安全かつ予測可能に動作できる範囲** です。

具体的には：

- センサの有効範囲（精度・遅延・整合性）
- アクチュエータの出力可能範囲（飽和・応答遅れ）
- 電源の制約（電圧 V・電流 I・電力 P）

これらをまとめた **多次元の運用包絡線** が Envelope です。

---

## 従来制御との違い

従来の制御設計では、Envelope は暗黙に仮定されがちです。

- 「センサは正しい」
- 「指示した推力は出る」
- 「電源は足りている」

Envelope Control では、この前提を捨てます。

> **Envelope を超えたら、それは外乱ではなく「状態遷移」である**

これが最大の違いです。

---

## Envelope Control の基本構造

Envelope Control は、次の役割分担で構成されます。

### 1. Envelope 定義
- センサ・アクチュエータ・V–I 制約を明示的に定義
- Warning / Limit / Critical の段階を持つ

### 2. FSM（有限状態機械）
- Envelope 状態に応じてモードを切替
- 「何をしてよいか」「何をしてはいけないか」を決める
- 性能ではなく **可用性と安全性**で判断

### 3. 制御器
- PID / LQR / MPC など、手法は問わない
- FSM が許可した範囲でのみ動作

重要なのは、**FSM は最適化しない**という点です。  
FSM の仕事は「拒否」と「固定」です。

---

## なぜ最適化しないのか

Envelope を超えた状況での最適化は、ほぼ確実に事故を招きます。

- 不正確なセンサに基づく最適化
- 飽和したアクチュエータへの要求
- V–I 制約を無視した制御入力

Envelope Control は、こうした行為を **設計段階で禁止**します。

> **拒否は制御行動の一つである**

これが設計上の核心です。

---

## LLM（大規模言語モデル）の位置づけ

Envelope Control において、LLM は主役ではありません。

許される役割：
- 再構成案の提案
- 設計変更の言語化
- ログや状況の要約

禁止される役割：
- 実時間制御
- Envelope 定義の変更
- FSM 遷移の決定

LLM は **助言者**であり、**実行者ではない**。  
この線を越えた瞬間、システムは不安定になります。

---

## 典型的な適用例

- センサが一部故障したドローンが飛び続ける
- 劣化したアクチュエータを抱えたロボットが安全に停止する
- 電源制約下で性能を捨てつつ動作を維持する自律システム

共通点はひとつです。

> **性能より、生き残ることを優先する**

---

## 何をしないか（重要）

Envelope Control は以下を目的にしません。

- 性能最大化
- 学習による即時適応
- AI による自律判断の全面委譲

これは **AI 制御の話ではなく、制御設計の話**です。

---

## まとめ

Envelope Control は問いを変えます。

- ✕ どう最適化するか  
- ○ **どこまでなら動いてよいか**

制御対象の「使用範囲」を状態として扱うことで、  
システムは **壊れ方を選べる** ようになります。

これは派手な技術ではありません。  
しかし、現場で最後に役に立つ設計思想です。

---

## 関連リポジトリ

- https://github.com/Samizo-AITL/envelope-control

---

*Envelope Control is not about pushing systems harder,  
but about knowing precisely when to stop.*
