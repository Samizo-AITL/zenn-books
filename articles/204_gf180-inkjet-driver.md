---
title: "【Inkjet】GF180 Inkjet Driver 設計探索（続編2）— 300dpiを前提としたHVドライバアレイの成立点"
emoji: "🖨️"
type: "tech"
topics:
  - semiconductor
  - icdesign
  - layout
  - inkjet
  - gf180
published: true
---

GF180MCU open PDK を用いたインクジェットドライバ IC の設計探索において、  
400dpi 配列が DNWELL 制約により不成立であることを確認した。

本記事ではその結果を踏まえ、  
300dpi ピッチに設計条件を固定した場合に  
HV_SW_UNIT アレイがどこまで実装対象として成立するのかを、  
**GDS レイアウトベース**で整理する。

本記事は、以下の記事の **続編（結果編）**です。

- 前編：GF180 Inkjet Driver 設計探索  
  https://zenn.dev/samizo_aitl/articles/024_gf180-inkjet-driver
- 続編：400dpi の限界と 300dpi への現実解  
  （400dpi が DNWELL 制約により構造的に不成立であることを GDS で確認）

前稿では、

> **GF180MCU + DNWELL 前提では  
> 400dpi（63.5µm）インクジェットドライバは構造的に不成立**

という結論に到達しました。

本稿ではその結果を踏まえ、  
**300dpi（約85µm）に設計条件を固定した場合、  
HV ドライバアレイはどこまで「実装対象」として成立するのか**  
を整理します。

---

## なぜ 300dpi に固定するのか

300dpi のピッチは：

- 25.4mm / 300 ≒ **84.7µm**

これは、GF180 の HVMOS において支配的となる

- DNWELL エンクロージャ
- 高電圧デバイスのドリフト領域
- ガードリングおよび分離マージン

を **同時に満たせる最小クラスのピッチ**です。

400dpi の探索で重要だったのは、

> 「どこまで詰められるか」ではなく  
> **「どこからが現実解か」**

を GDS で確定できた点でした。

300dpi は、その **確定した成立点**です。

---

## 300dpi 専用 HV_SW_UNIT アレイ

300dpi では、以下の設計方針を採用しました。

- dpi をパラメータ化しない  
  → **300dpi 固定**
- HV_SW_UNIT 内のガードリングは廃止
- アレイ外周で **列単位の Guard Ring 共有**
- DNWELL 連続性を最優先

アレイ生成コード上の本質的な変更点は、  
実質的に **ピッチ指定のみ**です。

```python
pitch_x = um(85.0, layout.dbu)  # 300 dpi
pitch_y = um(85.0, layout.dbu)
```

400dpi では破綻していた構造が、  
300dpi では **無理なく配置できるレンジ**に入ります。

---

※ 本アレイ検証は、DNWELL 分離が最も厳しく効く条件を想定し、  
NMOS 主体・4×2 構成を最小評価ブロックとして実施している。  
これにより、300dpi における成立性は  
単セルや理想配置ではなく、  
**アレイ中心部を含む実効的な物理条件**で確認されている。

---

## GDS 上で確認できたこと

300dpi アレイ GDS を生成・確認した結果、  
以下が明確になりました。

- DNWELL のエンクロージャが自然に収まる  
- Guard Ring が「邪魔な存在」ではなく、  
  **意味を持つ隔離構造**として成立  
- ユニット間に **配線・電源引き回しの余地**が見える  
- 配列全体が、もはや「配置実験」ではなく  
  **IC の土台構造として読めるレベル**に移行した

重要なのは、

> **300dpi は「工夫すれば成立する」ではなく、  
> 「前提として成立している」**

という点です。

400dpi では、どれだけ構造を削っても  
常に *無理をしている感* が残りましたが、  
300dpi では **設計判断が自然に下せる**状態に変わりました。

![HV_SW_UNIT Array – 300 dpi Guard-Ring-Shared Implementation](https://samizo-aitl.github.io/gf180-inkjet-driver/docs/images/06_hv_sw_unit_array_gr_shared_300dpi.png)

---

## 300dpi はゴールではないが、入口ではある

もちろん、300dpi に落としたからといって、

- 製品レベルの信頼性
- フル機能のドライバ回路
- Pad / ESD / テスト構造

までが即座に完成するわけではありません。

しかし、

- DNWELL
- 高電圧デバイス
- ガードリング
- 配列ピッチ

という **最も重い物理制約**をクリアしたことで、

> **「設計を進める資格」が得られた**

と言えます。

---

## 300dpi 前提で次にやること

300dpi を前提にした次フェーズでは、  
以下が現実的な検討対象になります。

1. **HV_SW_UNIT の実デバイス置換**  
   - プレースホルダから GF180 HV MOS への差し替え
2. **電源・GND 配線骨格の検討**  
   - HV / LV の分離とリターン電流意識
3. **DRC ベースでの寸法確定**
4. **PEX → SPICE による sanity check**  
   - Id–Vd / Id–Vg  
   - スイッチング過渡
5. **最小限の Pad / I/O 構成**

ここから先は、  
「成立するかどうか」を見る探索ではなく、  
**成立する前提で IC を仕上げていくフェーズ**です。

---

## まとめ

- 400dpi：  
  **GF180MCU + DNWELL 構造では物理的に不成立**
- 300dpi：  
  **GDS レベルで成立点を確認**
- 本検討の成果は、  
  **「できる／できない」の境界を物理で確定したこと**

300dpi は妥協ではなく、  
**現実に立脚した設計判断の結果**です。

---

## おわりに

高電圧・混載・高密度という条件が重なると、  
設計は必ず **物理に引き戻されます**。

GF180MCU open PDK は、その現実を  
**誰でも GDS で確認できる**貴重な環境です。

この先に進むなら、  
それはもう **300dpi を前提とした別フェーズ**になります。

本記事では、  
ここで一度、結果を確定します。

---

## 本プロジェクトとの関係

本検証およびその後のレイアウト成果は、  
以下の技術探索プロジェクトの一部である。

### gf180-inkjet-driver

- **目的**: インクジェット・プリントヘッド向け  
  高電圧 mixed-signal ドライバ IC の物理設計探索
- **方針**: 自動化ではなく **レイアウト主導設計**

#### 🔗 Links

- GitHub Repository  
  https://github.com/Samizo-AITL/gf180-inkjet-driver

- GitHub Pages（設計ドキュメント）  
  https://samizo-aitl.github.io/gf180-inkjet-driver/

- Design Docs（GDS / Layout中心）  
  https://samizo-aitl.github.io/gf180-inkjet-driver/docs/

---

💬 ご意見・議論は GitHub Discussions へ  
https://github.com/Samizo-AITL/gf180-inkjet-driver/discussions
