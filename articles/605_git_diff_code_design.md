---
title: "【機械設計】05. 設計をコード化すると「差分」が意味を持つ ― GUI CADとの決定的な違い"
emoji: "📐"
type: "tech"
topics: ["機械設計", "cad", "git", "freecad", "設計思想"]
published: true
---

## はじめに

これまでの記事で、

- 設計をコードで記述する  
- FreeCAD で実際に形を生成する  
- Part Design を捨てずにコードと併用する  

という流れを見てきました。

では最後に、  
**なぜそこまでして設計をコード化するのか？**

その答えの一つが、  
**「差分が設計になる」** という点です。

---

## GUI CADの差分は、なぜ意味を持ちにくいか

GUI CAD でも履歴やフィーチャツリーは残ります。  
しかし、次のような経験はないでしょうか。

- どこをどう変えたのか分からない  
- なぜその寸法になったのか追えない  
- レビュー時に「で、何が変わったの？」となる  

GUI操作は、  
**結果は残っても、意図が残りにくい**  
という構造的な問題を抱えています。

---

## コード設計では、差分＝設計変更

コード設計では、  
設計変更はそのまま **テキストの差分** になります。

例えば、板の長さを変更した場合。

```diff
- LEN = 120.0  # mm
+ LEN = 160.0  # mm
```

これだけで、

- どこが変わったか  
- 何が変わったか  
- 影響範囲はどこか  

が一目で分かります。

---

## 設計判断そのものが差分になる

寸法だけでなく、  
**設計ルール自体** も差分になります。

```diff
- if LEN > 100:
-     THK = 8.0
+ if LEN > 150:
+     THK = 10.0
```

これは GUI CAD ではほぼ不可能です。

- なぜ板厚が変わったのか  
- その条件は何か  

が、**履歴として明示的に残る** からです。

---

## レビューが成立するという変化

設計をコード化し、  
Git で管理すると、  
**設計レビューが成立** します。

- 数値変更の理由をコメントできる  
- 差分単位でレビューできる  
- 元に戻すことが容易  

これは、設計を  
「その場の作業」から  
**管理可能な成果物** に変える力を持っています。

---

## GUI CADとの差分比較

| 観点 | GUI CAD | コード設計 |
|---|---|---|
| 差分の可読性 | 低い | 高い |
| 意図の追跡 | 困難 | 明示的 |
| レビュー | 口頭・画面共有 | Git |
| 差戻し | 手作業 | commit revert |

---

## 引き継ぎが楽になる理由

コード設計で引き継ぐのは、  
操作手順ではありません。

- 設計条件  
- 設計判断  
- 変更履歴  

これらが **コードとして残る** ため、

> なぜこうなっているのか

を、後から追うことができます。

---

## すべてをコード化する必要はない

ここで重要なのは、  
**すべてをコードにすることではない**  
という点です。

- 形状の微調整  
- 美観  
- 最後の詰め  

までコード化する必要はありません。

> **差分として残したいものだけをコードにする**

この割り切りが、  
現実的な運用を可能にします。

---

## 連載全体の位置づけ

- 設計をコードで書けること  
- GUI CAD と併用できること  
- 現場で壊れない構成があること  

そして最後に、

> **変更が、意味のある差分になる**

という点が、  
この連載の結論です。

---

## おわりに

設計をコードで書く最大の価値は、  
自動化や AI そのものではありません。

**変更が、意味のある差分として残ること。**

GUI CAD を否定する必要はありません。  
ただ、

- 設計判断  
- 条件  
- ルール  

だけは、  
**コードとして残しておく。**

それだけで、  
設計は長期的に扱える  
**知識資産** になります。

---

## 補足

本記事中のコードは、  
設計手法の説明を目的とした例示です。

実際の設計コードやライセンスについては、  
以下のページで管理しています。

- https://samizo-aitl.github.io/full-code-mechanical-design/
