---
title: "【AITL】AITL Silicon Pathway Chapter3：FSM RTLは本当にハードウェアとして成立するのか？"
emoji: "🧪"
type: "tech"
topics: ["ASIC", "Verilog", "FSM", "OpenLane", "EDA"]
published: false
---

## はじめに（この章で何を確認するのか）

Chapter1 では Python による FSM 設計、  
Chapter2 では FSM の形式化仕様と Verilog RTL を作成しました。

では次の問いです。

> **その RTL は、本当にハードウェアとして成立するのか？**

Chapter3 の目的は、ここを確認することです。

- ちゃんとシミュレーションで動くのか
- 合成ツールにかけて「門前払い」されないか
- ASIC 視点で見て、危険な匂いがしないか

高度な検証や最適化は行いません。  
**まずは「成立するかどうか」だけを見ます。**

---

## Chapter3 のスコープ整理（重要）

### やること
- FSM RTL の最小シミュレーション
- Testbench の考え方（完全自動化なし）
- OpenLane による論理合成（concept レベル）
- 合成ログ・警告の読み解き
- 「RTL が仕様通りか」を確認する観点整理

### やらないこと
- SoC 全体統合
- UVM などの高度検証
- タイミング最適化・PPA チューニング
- レイアウト詳細

**やらないことを決める**のが、この章の完成度を上げます。

---

## なぜ Simulation + Synthesis が最低条件なのか

よくある誤解があります。

- 「シミュレーションで動いたから OK」
- 「合成が通ったから OK」

どちらも **片手落ち**です。

### シミュレーションが保証するもの
- 入力に対する振る舞い
- 状態遷移が仕様通りか
- 出力が期待値か

### 合成が保証するもの
- RTL が論理的に一意に解釈できるか
- ラッチや多重ドライバがないか
- ASIC フローで破綻しない構造か

👉 **両方通って初めて「ハードウェアとして成立」**です。

---

## 最小シミュレーションの考え方

### この章でのスタンス
- 網羅性は追わない
- ランダムテストもしない
- 仕様の「要点」だけを叩く

### 確認すべき最低ライン
1. Reset が効いているか
2. 代表的な遷移が正しく起きるか
3. 出力が Moore / Mealy の定義通りか
4. X や不定値が広がらないか

これだけで **8割の致命傷は潰せます**。

---

## Testbench は「仕様チェック装置」

Testbench は「動かすための道具」ではありません。

> **仕様を裏切ったら即死させる装置**

です。

この章での Testbench は：
- クロック生成
- リセット投入
- 入力列を与える
- 期待値と違えば `$fatal`

たったこれだけですが、  
**形式化仕様（Chapter2）と 1:1 に対応**していることが重要です。

---

## OpenLane（concept）にかける意味

OpenLane を使う目的は、PPA を良くすることではありません。

### Chapter3 での OpenLane の役割
- 合成できるか？
- クロックは認識されているか？
- 危険な警告は出ていないか？

つまり、

> **ASIC ツールの目で見て、変な RTL ではないか？**

を確認するためです。

---

## よく出る警告とその意味

### latch inferred
- 組合せロジックで代入漏れ
- 仕様未定義の分岐がある

→ FSM では **ほぼ設計ミス**

---

### multiple drivers
- 同じ信号を複数 always が駆動
- 状態と出力の責務分離が崩れている

→ **シリコンでは即アウト**

---

### no clocks found / unconstrained paths
- クロック名の指定ミス
- 制約を書き忘れている

→ ツールが「何を基準にすればいいか分からない」状態

---

### unused logic removed
- 出力に影響しない論理は消される

→ **正常**  
デバッグ信号が消えても慌てないこと。

---

## ASIC 視点での RTL チェックポイント

この章で確認できれば十分な観点は以下です。

1. **合成可能性**  
   fatal がない／構造が一意

2. **Reset の確定性**  
   全レジスタが定義される

3. **遷移の決定性**  
   1 サイクル 1 遷移（優先順位明確）

4. **出力の安定性**  
   Moore / Mealy の意図が崩れていない

5. **クロックの健全性**  
   認識されている／現実的な周期

---

## Chapter3 の出口条件

以下を満たしたら **この章は完了**です。

- シミュレーションがクリーンに通る
- 代表遷移が仕様通り
- 出力が意図通り
- OpenLane（concept）で合成が通る
- 警告の意味を説明できる

PPA が悪くても構いません。  
**「成立している」ことが重要です。**

---

## まとめ（次に進む前に）

Chapter3 は、

- 派手さはない
- 数式も少ない
- しかし **最も現実と向き合う章**

です。

ここを飛ばすと、
- 後工程で理由不明の失敗をします
- デバッグ地獄になります

逆に、ここを丁寧に通すと、
- Chapter4 以降が驚くほど楽になります

---

## 次章へ

次に進むとすれば：

- FSM の形式検証
- Python ↔ Verilog 等価性
- FSM × PID × LLM の接続検証

ですが、それは **次章の話**です。

Chapter3 は、  
**「FSM RTL がハードウェアとして成立する」ことを確認する章**。

ここまで来たなら、  
あなたの設計はもう「机上の空論」ではありません。
