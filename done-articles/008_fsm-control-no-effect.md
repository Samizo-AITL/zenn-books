---
title: "【AITL】FSM制御が効かなかった実例"
emoji: "🧊"
type: "tech"
topics: ["制御", "FSM", "PID"]
published: true
---

## はじめに

離散時間PID制御系に対して、  
**FSM（Finite State Machine）による監督制御を追加する**という試みを行った。

結論から書くと、

> **今回の条件では、FSM制御による明確な効果は見られなかった。**

本記事は、その事実と簡単な考察をまとめたものである。

---

## やったこと

- 連続時間プラント
- 離散時間PID制御（ZOH前提）
- サンプリング周期の揺れ（ジッタ）を導入
- サンプル間（intersample）で外乱が入るケースを想定
- 上位にFSMを配置し、制御モード切替を試行

FSMは以下のような指標を監視する構成とした。

- 誤差の増大
- 振動傾向
- 操作量の変動量

---

## 期待していたこと

- サンプリング条件が悪化した際にFSMが介入する
- 制御性能劣化時にモード切替が起きる
- 結果として、PID単独よりも安定した挙動を示す

---

## 実際の結果

- 多くのケースで **FSMは発動しなかった**
- FSMが発動しても、制御性能に明確な改善は見られなかった
- PID単独の場合と大きな差が出ない条件が多かった

少なくとも今回の設定では、

> **「FSMを入れたから制御が良くなった」と言える結果は得られなかった**

---

## 考察

### intersample外乱はFSMの守備範囲外

サンプル間で発生する外乱は、連続時間で状態を変化させる。  
FSMはサンプル点でしか判断できないため、

- 外乱そのものを抑え込む
- 発生直後に即応する

といった役割は持たない。

これは設計ミスではなく、**FSMの構造上の制約**である。

---

### FSMが沈黙するのは必ずしも失敗ではない

FSMは「異常があれば必ず動く装置」ではない。

- 制御前提がまだ破綻していない
- 下位のPIDで対処できている

場合、FSMが何もしないのは自然である。

今回の結果は、

> **FSMが不要な介入をしなかった**

と解釈することもできる。

---

## まとめ

- FSM制御を試したが、今回の条件では明確な効果は見られなかった
- intersample外乱はFSMで直接扱える問題ではない
- FSMは制御性能を向上させる装置ではなく、運用判断のための仕組みである
- 適用範囲を誤ると「効かない」ように見える

FSMや上位制御は万能ではない。  
**どこまでが守備範囲かを見極めること自体が設計の一部**だと感じた。

---

## おわりに

「うまくいかなかった事例」だが、  
この結果は今後の設計判断には十分役に立つ。

同様の構成を検討している場合、  
**FSMに過剰な期待を持たないこと**の参考になれば幸いである。
